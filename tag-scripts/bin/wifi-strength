#!/bin/sh
# Since wifi-strength is given in negative db, this calculates the
# proper amount of bars to display in xmobar

essid=$(iw dev | grep ssid | cut -d' ' -f2)
ngtv_strngth=$(iwlist wlp3s0 scan | grep "Signal level" | cut -d'=' -f3 | cut -c2,3)
strngth=$((100 - ngtv_strngth))
bars=$((strngth / 10))

case $bars in
  0)  bar='[----------]' ;;
  1)  bar='[/---------]' ;;
  2)  bar='[//--------]' ;;
  3)  bar='[///-------]' ;;
  4)  bar='[////------]' ;;
  5)  bar='[/////-----]' ;;
  6)  bar='[//////----]' ;;
  7)  bar='[///////---]' ;;
  8)  bar='[////////--]' ;;
  9)  bar='[/////////-]' ;;
  10) bar='[//////////]' ;;
  *)  bar='[----!!----]' ;;
esac

echo "$essid $bar"

exit 0
